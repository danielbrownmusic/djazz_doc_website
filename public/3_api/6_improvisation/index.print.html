<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.129.0">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="">
    <meta name="author" content="Daniel Brown">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="//localhost:1313/images/hero.png">
    <meta name="twitter:title" content="Improvisation with the Factor Oracle :: Hugo Relearn Theme">
    <meta property="og:url" content="//localhost:1313/3_api/6_improvisation.html">
    <meta property="og:site_name" content="Hugo Relearn Theme">
    <meta property="og:title" content="Improvisation with the Factor Oracle :: Hugo Relearn Theme">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta property="og:image" content="//localhost:1313/images/hero.png">
    <meta itemprop="name" content="Improvisation with the Factor Oracle :: Hugo Relearn Theme">
    <meta itemprop="image" content="//localhost:1313/images/hero.png">
    <title>Improvisation with the Factor Oracle :: Hugo Relearn Theme</title>
    <link href="//localhost:1313/3_api/6_improvisation.html" rel="canonical" type="text/html" title="Improvisation with the Factor Oracle :: Hugo Relearn Theme">
    <link href="../../3_api/6_improvisation/index.xml" rel="alternate" type="application/rss+xml" title="Improvisation with the Factor Oracle :: Hugo Relearn Theme">
    <link href="../../css/fontawesome-all.min.css?1732823427" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fontawesome-all.min.css?1732823427" rel="stylesheet"></noscript>
    <link href="../../css/nucleus.css?1732823427" rel="stylesheet">
    <link href="../../css/auto-complete.css?1732823427" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/auto-complete.css?1732823427" rel="stylesheet"></noscript>
    <link href="../../css/perfect-scrollbar.min.css?1732823427" rel="stylesheet">
    <link href="../../css/fonts.css?1732823427" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../css/fonts.css?1732823427" rel="stylesheet"></noscript>
    <link href="../../css/theme.css?1732823427" rel="stylesheet">
    <link href="../../css/theme-relearn-auto.css?1732823427" rel="stylesheet" id="R-variant-style">
    <link href="../../css/chroma-relearn-auto.css?1732823427" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../../css/variant.css?1732823427" rel="stylesheet">
    <link href="../../css/print.css?1732823427" rel="stylesheet" media="print">
    <link href="../../css/format-print.css?1732823427" rel="stylesheet">
    <script src="../../js/variant.js?1732823427"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='\/\/localhost:1313';
      window.index_js_url="../../index.search.js?1732823427";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    <style>
      #R-body img.bg-white {
        background-color: white;
      }
    </style>
  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../../3_api/6_improvisation.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><a itemprop="item" href="../../3_api.html"><span itemprop="name">API</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">Improvisation with the Factor Oracle</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../3_api/4_external_controls_and_views/2_dicts.html" title="Dicts (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../../3_api/6_improvisation/0_general_description.html" title="General Description (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable default" tabindex="-1">
        <div class="flex-block-wrapper">
          <article class="default">
            <header class="headline">
            </header>

<h1 id="improvisation-with-the-factor-oracle">Improvisation with the Factor Oracle</h1>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Subsections of Improvisation with the Factor Oracle</h1>
          <article class="default">
            <header class="headline">
            </header>

<h1 id="general-description">General Description</h1>


<pre class="mermaid align-center zoomable">
classDiagram
	generator *-- score_player
	generator *-- improviser

	improviser *-- factor_oracle_player 

	factor_oracle_player : int max-continuity
	factor_oracle_player : int pitch-transposition 
	factor_oracle_player *-- factor_oracle 
	Class03 *-- Class04
	Class05 *-- Class06
	Class07 .. Class08
	Class09 --&gt; C2 : Where am i?
	Class09 --* C3
	Class09 --|&gt; Class07
	Class07 : equals()
	Class07 : Object[] elementData
	Class01 : size()

	Class08 &lt;--&gt; C2: Cool label
</pre>
<p>Each generator contains</p>
<p>The factor oracle (&ldquo;factor_oracle.maxpat&rdquo;)</p>
<p>The factor oracle player (&ldquo;factor_oracle_player.maxpat&rdquo;) creates the improvisation. As its name suggests, it contains and makes use of the &ldquo;factor_oracle&rdquo; Max abstraction.</p>
<p>The analyzer uses the same set of symbols as the factor oracle. It is used offline, to create a file of labeled beats for a song, and online, to convert the data at the beginning of each beat into a symbol to be passed to the factor oracle player. This symbol is then used as the query to the factor oracle to produce the next beat.</p>
<p>The analyzer</p>
<p>Input is passed to patchers two ways: synchronously and asynchronously, depending on the type of input data.
Synchoronous data consists of the beat number, the current tempo (since this can fluctuate), and any data to be used by the analyzer.
This data is passed serially through patch cords which send data serially.</p>
<p>The generator uses the beat number when improvise mode is not on; it uses this to play the next beat or a different beat if one has been selected by the user.
In improvise mode, the beat number is not considered. The label produced by the analyzer is used, as described above.</p>
<p>Asynchoronous data is anything changed by the user using the GUI. A lot of this data is well known to audio interface users: track volume, MIDI and audio effects like pitch transposition, for instance. The factor oracle player has two asynchronous controls: max-continuity and pitch-transposition.</p>
<p>Definition:</p>
<p>A beat is a collection of notes that occurs between two timepoints. These timepoints are considered to occur at regular intervals. Thus a piece of music that has a pulse can be considered a sequence of beats.</p>
<p>At each new beat, calculate a new beat‚Äôs worth of music to play. The calculation consists of finding a beat in the database that is the ‚Äúbest match‚Äù (or at least a ‚Äúgood match‚Äù) based on the data that exists at the beginning of the new beat.</p>
<p>This data can be based on any of the following:</p>
<ol>
<li>
<p>The location in the song/musical piece.  For example, ‚Äúthe A minor 7 chord that occurs at the beginning of measure 13.‚Äù  A good match is a beat from the database that occurs over the same chord. This could be the same beat as in the original piece, or it could be a different beat that has the same chord, which is more interesting. This creates correct adherence to musical form, if such form exists in the piece.</p>
</li>
<li>
<p>What we just played in the last beat. For example, an ascending scale in the previous beat could look for a melody that starts on the next note in the scale in the next beat. This creates continuity.</p>
</li>
<li>
<p>What other listeners have played. This creates responsiveness.</p>
</li>
</ol>
<p>In the current usage of Djazz, this match is based only on option 1: the chord symbol that occurs on the given beat. Matching is done by comparing labels. Each beat has a label which reflects the data described above. It is a string of symbols. The nature of this string is determined by the user. In the current usage of Djazz, this string represents the chord symbol, which consists of the chord root and its quality.</p>
<p>A match can be made by exact comparison, or by ‚Äúfuzzy‚Äù methods. In the current usage of Djazz, a chord represents a match if the quality is the same, but the root can be a small distance away from the desired one. The melody is transposed to match the correct root.</p>
<p>The methods here are general, and the current usage of Djazz can be changed to admit other types of music.</p>
<p>This would involve using an extant system, devising a new one, or modifying an extant one to label beats. Optionally defining the definition of a match, if it is not defined as exact.</p>
<p>Djazz supplies a software framework for empirical inquiry into the suitability of a particular data encoding for music: ascertaining the ‚Äúcorrectness‚Äù of an analysis via listening to the resulting synthesis. Or just enjoying listening to or playing along with improvised music.</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="description-of-the-factor-oracle">Description of the Factor Oracle</h1>

<ol>
<li>The oracle factor patch is here:</li>
</ol>
<p>patchers/data_structures/factor_oracle/factor_oracle.maxpat</p>
<ol start="2">
<li>To use different comparison functions, you need to write a Max patch that performs the label comparison. Then you can change the comparison function in the oracle factor patch by passing it the ‚Äúcomparison‚Äù message and the name of the comparison patch. So far, I&rsquo;ve written two comparison patches:</li>
</ol>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="the-factor-oracle-player">The Factor Oracle Player</h1>

<p>patchers/factor_oracle_player/factor_oracle_player.maxpat</p>
<ol start="7">
<li>The ‚Äúfactor oracle player‚Äù which takes labels one by one, which can be of any form (but in the current program, it&rsquo;s a dictionary with two entries: the chord root and the chord label), and uses a factor oracle to produce a beat that matches the label. It takes two parameters: max-continuity and pitch-transposition.</li>
</ol>
<p>When the maximum continuity is reached, it takes a suffix link and searches for a matching label. If no matching label is found, it chooses a random state.</p>
<p>When the ‚ÄúNEW‚Äù button is pressed, it reads the current antescofo partition from memory (converting it into a Max dict object), then runs the factor oracle player to generate a different succession of rhythms for each requested channel, mapping these rhythms to different (unused) channels, and combining everything again into a Max dict.</p>
<p>The factor oracle player works the same way for audio improvisers, but it doesn&rsquo;t write any scores. It sends data to supervp objects to play from the audio buffer (recorded or loaded):</p>
<p>patchers/improvise_oracles/djazz_audio_oracle_players.maxpat</p>

            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
            </header>

<h1 id="the-analyzer">The Analyzer</h1>

<p>booboo</p>

            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../../js/clipboard.min.js?1732823427" defer></script>
    <script src="../../js/perfect-scrollbar.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-color.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-dispatch.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-drag.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-ease.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-interpolate.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-selection.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-timer.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-transition.min.js?1732823427" defer></script>
    <script src="../../js/d3/d3-zoom.min.js?1732823427" defer></script>
    <script src="../../js/js-yaml.min.js?1732823427" defer></script>
    <script src="../../js/mermaid.min.js?1732823427" defer></script>
    <script>
      window.themeUseMermaid = JSON.parse("{ \"securityLevel\": \"loose\" }");
    </script>
    <script src="../../js/theme.js?1732823427" defer></script>
  </body>
</html>
